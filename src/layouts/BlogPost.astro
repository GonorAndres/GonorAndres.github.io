---
import BaseLayout from './BaseLayout.astro';
import type { Lang } from '../i18n';
import CategoryBadge from '../components/ui/CategoryBadge.astro';
import Squiggle from '../components/decorations/Squiggle.astro';

interface Props {
  title: string;
  description: string;
  date: string;
  category: string;
  lang: Lang;
}

const { title, description, date, category, lang } = Astro.props;
const formattedDate = new Date(date).toLocaleDateString(lang === 'es' ? 'es-MX' : 'en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<BaseLayout title={`${title} | AGO Blog`} description={description} lang={lang}>
  <article class="py-16 px-6">
    <div class="max-w-2xl mx-auto">
      <div class="mb-8">
        <div class="flex items-center gap-3 mb-4">
          <CategoryBadge label={category} />
          <time class="text-sm text-navy/50">{formattedDate}</time>
        </div>
        <h1 class="text-3xl md:text-5xl font-bold text-navy leading-tight mb-4">{title}</h1>
        <p class="text-lg text-navy/60">{description}</p>
      </div>
      <Squiggle class="w-full h-4 mb-8" color="#D4A574" />
      <div class="blog-content prose prose-lg max-w-none
        prose-headings:font-serif prose-headings:text-navy
        prose-h2:mt-16 prose-h2:pt-8 prose-h2:border-t prose-h2:border-amber/20
        prose-h3:mt-10 prose-h3:mb-4
        prose-p:text-navy/80 prose-p:leading-relaxed prose-p:mb-6
        prose-a:text-terracotta prose-a:no-underline hover:prose-a:underline
        prose-strong:text-navy
        prose-code:text-terracotta prose-code:bg-amber/10 prose-code:px-1 prose-code:rounded
        prose-code:before:content-none prose-code:after:content-none
        prose-blockquote:border-l-amber prose-blockquote:bg-amber/5 prose-blockquote:rounded-r-lg prose-blockquote:italic
        prose-table:text-sm
      ">
        <slot />
      </div>
      <div class="mt-16 pt-8 border-t border-amber/20">
        <a href={lang === 'es' ? '/blog' : '/en/blog'} class="text-terracotta hover:underline text-sm">
          &larr; {lang === 'es' ? 'Volver al blog' : 'Back to blog'}
        </a>
      </div>
    </div>
  </article>
</BaseLayout>
